<%- include('partials/header') %>
<!-- Modals -->
<!-- New Profile Picture -->
<div class="modal fade" id="editProfile" tabindex="-1" role="dialog" aria-labelledby="title" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title text-center font-weight-bold" id="title">Editing Profile Picture</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group mt-2 px-2">
                    <div class="dropzone" id="settings-dropzone">
                    </div>
                    <form action="/settings/picture-update" method="POST" class="settings-dropzone"
                          enctype="multipart/form-data">
                        <div class="fallback">
                            <!-- <input name="file" type="file" /> -->
                        </div>
                        <button id="save-profile-picture" type="button" class="btn btn-muted2 btn-sm btn-block shadow-sm py-1 px-3 mt-2 text-muted2 border">
                            Save Changes
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Update Password -->
<div class="modal fade" id="changePasswordForm" tabindex="-1" role="dialog" aria-labelledby="title" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title text-center font-weight-bold" id="title">Change Password</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form action="/settings/change-password" method="post">
                    <div class="form-group px-3">
                        <h5>New Password</h5>
                        <label for="password"></label>
                        <input type="password" name="password" id="password" class="form-control" autofocus>
                        <button id="changePasswordButton" class="btn btn-muted2 btn-sm btn-block shadow-sm py-1 px-3 mt-2 text-muted2 border">
                            Save Changes
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- End Modals -->


<!-- Main -->
<div class="container-fluid mt-5 pt-5">
    <div class="row h-100">
        <div class="col-sm-3 d-none d-lg-block border-right">
            <div data-toggle="tooltip" data-placement="top" title="Click to change picture" alt="Change Picture"
                 id="edit-profile" class="circle-avatar" style="background-image:url(<%- data.photo %>)"></div>
            <hr>

        </div>
        <div class="col-lg-9">
            <h1 class="font-weight-bold">Settings</h1>
            <h4>Update your Settings</h4>
            <ul class="nav nav-pills nav-fill mt-5">
                <li class="nav-item">
                    <a href="#account" class="nav-link active text-muted2" data-toggle="tab">Account</a>
                </li>
                <li class="nav-item">
                    <a href="#social" class="nav-link text-muted2" data-toggle="tab">Social</a>
                </li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane fade show active" id="account">

                    <form id="update-user-info">
                        <div class="form-label-group mt-5">
                            <label class="font-weight-bold" for="fullName">Full Name</label>
                            <input id="fullName" id="fullName" class="form-control" placeholder="Full Name"
                                   value="<%= data.fullName %>" autofocus required>
                        </div>
                        <div class="form-label-group mt-3">
                            <label class="font-weight-bold" for="bio">About</label>
                            <div class="quill-composer" id="quill-settings-about">
                                <%- data.bio %>
                            </div>
                            <input name="bio" id="bio" value="<%= data.bio %>" hidden>
                        </div>

                        <div class="mt-3">
                            <label class="font-weight-bold" for="courses">Course</label>
                            <input type="text" name="courses" id="courses" value="<%= data.courses %>"
                                   placeholder="Courses" autofocus>
                        </div>

                        <div id="change-password" class="mt-3">
                            <t class="text-danger avoltarTopo">Change Password</t>
                        </div>
                        <input name="userId" type="text" hidden value="<%= data._id %>">
                        <button onclick="location.href = '/settings';" class="btn btn-muted2 btn-sm btn-block shadow-sm p-1 mt-3 text-muted2 border" type="submit">
                            Save Changes
                        </button>
                    </form>
                </div>


                <div class="tab-pane fade" id="social">
                    <form id="update-user-info-social">

                        <div class="form-label-group mt-3">
                            <label class="font-weight-bold" for="facebook">Facebook</label>
                            <input type="text" name="facebook" id="facebook" class="form-control"
                                   placeholder="Enter Your Facebook Username" value="<%= data.facebook %>" autofocus>
                        </div>

                        <div class="form-label-group mt-3">
                            <label class="font-weight-bold" for="twitter">Twitter</label>
                            <input type="text" name="twitter" id="twitter" class="form-control"
                                   placeholder="Enter Your Twitter Username" value="<%= data.twitter %>" autofocus>
                        </div>

                        <div class="form-label-group mt-3">
                            <label class="font-weight-bold" for="instagram">Instagram</label>
                            <input type="text" name="instagram" id="instagram" class="form-control"
                                   placeholder="Enter Your Instagram Username" value="<%= data.instagram %>" autofocus>
                        </div>

                        <div class="form-label-group mt-3">
                            <label class="font-weight-bold" for="linkedIn">LinkedIn</label>
                            <input type="text" name="linkedIn" id="linkedIn" class="form-control"
                                   placeholder="Enter Your LinkedIn Username" value="<%= data.linkedIn %>" autofocus>
                        </div>

                        <div class="form-label-group mt-3">
                            <label class="font-weight-bold" for="github">GitHub</label>
                            <input type="text" name="github" id="github" class="form-control" placeholder="Enter Your GitHub Username"
                                   value="<%= data.github %>" autofocus>
                        </div>

                        <input name="userId" type="text" hidden value="<%= data._id %>">
                        <button onclick="location.href = '/settings';" class="btn btn-muted2 btn-sm btn-block shadow-sm p-1 mt-3 text-muted2 border" type="submit">
                            Save Changes
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    require(['./scripts/main'], (main) => {
        require(['modules/settings/main-settings']);
    });
</script>
<%- include('partials/footer') %>